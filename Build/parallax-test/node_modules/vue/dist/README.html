<h2>Explanation of Build Files</h2>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>UMD</th>
      <th>CommonJS</th>
      <th>ES Module</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Full</strong></td>
      <td>vue.js</td>
      <td>vue.common.js</td>
      <td>vue.esm.js</td>
    </tr>
    <tr>
      <td><strong>Runtime-only</strong></td>
      <td>vue.runtime.js</td>
      <td>vue.runtime.common.js</td>
      <td>vue.runtime.esm.js</td>
    </tr>
    <tr>
      <td><strong>Full (production)</strong></td>
      <td>vue.min.js</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><strong>Runtime-only (production)</strong></td>
      <td>vue.runtime.min.js</td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h3>Terms</h3>

<ul>
  <li>
    <p><strong>Full</strong>: builds that contains both the compiler and the runtime.</p>
  </li>
  <li>
    <p><strong>Compiler</strong>: code that is responsible for compiling template strings into JavaScript render functions.</p>
  </li>
  <li>
    <p><strong>Runtime</strong>: code that is responsible for creating Vue instances, rendering and patching virtual DOM, etc. Basically everything minus the compiler.</p>
  </li>
  <li>
    <p><strong><a href="https://github.com/umdjs/umd">UMD</a></strong>: UMD builds can be used directly in the browser via a <code><script></code> tag. The default file from Unpkg CDN at <a href="https://unpkg.com/vue">https://unpkg.com/vue</a> is the Runtime + Compiler UMD build (<code>vue.js</code>).</p>
  </li>
  <li>
    <p><strong><a href="http://wiki.commonjs.org/wiki/Modules/1.1">CommonJS</a></strong>: CommonJS builds are intended for use with older bundlers like <a href="http://browserify.org/">browserify</a> or <a href="https://webpack.github.io">webpack 1</a>. The default file for these bundlers (<code>pkg.main</code>) is the Runtime only CommonJS build (<code>vue.runtime.common.js</code>).</p>
  </li>
  <li>
    <p><strong><a href="http://exploringjs.com/es6/ch_modules.html">ES Module</a></strong>: ES module builds are intended for use with modern bundlers like <a href="https://webpack.js.org">webpack 2</a> or <a href="http://rollupjs.org/">rollup</a>. The default file for these bundlers (<code>pkg.module</code>) is the Runtime only ES Module build (<code>vue.runtime.esm.js</code>).</p>
  </li>
</ul>

<h3>Runtime + Compiler vs. Runtime-only</h3>

<p>If you need to compile templates on the fly (e.g. passing a string to the <code>template</code> option, or mounting to an element using its in-DOM HTML as the template), you will need the compiler and thus the full build.</p>

<p>When using <code>vue-loader</code> or <code>vueify</code>, templates inside <code>*.vue</code> files are compiled into JavaScript at build time. You don’t really need the compiler in the final bundle, and can therefore use the runtime-only build.</p>

<p>Since the runtime-only builds are roughly 30% lighter-weight than their full-build counterparts, you should use it whenever you can. If you wish to use the full build instead, you need to configure an alias in your bundler.</p>

<h4>Webpack</h4>

<p><code>js
module.exports = {
  // ...
  resolve: {
    alias: {
      'vue$': 'vue/dist/vue.esm.js' // 'vue/dist/vue.common.js' for webpack 1
    }
  }
}
</code>`</p>

<h4>Rollup</h4>

<p>``` js
const alias = require(‘rollup-plugin-alias’)</p>

<p>rollup({
  // …
  plugins: [
    alias({
      ‘vue’: ‘vue/dist/vue.esm.js’
    })
  ]
})
```</p>

<h4>Browserify</h4>

<p>Add to your project’s <code>package.json</code>:</p>

<p><code>js
{
  // ...
  "browser": {
    "vue": "vue/dist/vue.common.js"
  }
}
</code></p>

<h3>Development vs. Production Mode</h3>

<p>Development/production modes are hard-coded for the UMD builds: the un-minified files are for development, and the minified files are for production.</p>

<p>CommonJS and ES Module builds are intended for bundlers, therefore we don’t provide minified versions for them. You will be responsible for minifying the final bundle yourself.</p>

<p>CommonJS and ES Module builds also preserve raw checks for <code>process.env.NODE_ENV</code> to determine the mode they should run in. You should use appropriate bundler configurations to replace these environment variables in order to control which mode Vue will run in. Replacing <code>process.env.NODE_ENV</code> with string literals also allows minifiers like UglifyJS to completely drop the development-only code blocks, reducing final file size.</p>

<h4>Webpack</h4>

<p>Use Webpack’s <a href="https://webpack.js.org/plugins/define-plugin/">DefinePlugin</a>:</p>

<p>``` js
var webpack = require(‘webpack’)</p>

<p>module.exports = {
  // …
  plugins: [
    // …
    new webpack.DefinePlugin({
      ‘process.env’: {
        NODE_ENV: JSON.stringify(‘production’)
      }
    })
  ]
}
```</p>

<h4>Rollup</h4>

<p>Use <a href="https://github.com/rollup/rollup-plugin-replace">rollup-plugin-replace</a>:</p>

<p>``` js
const replace = require(‘rollup-plugin-replace’)</p>

<p>rollup({
  // …
  plugins: [
    replace({
      ‘process.env.NODE_ENV’: JSON.stringify(‘production’)
    })
  ]
}).then(…)
```</p>

<h4>Browserify</h4>

<p>Apply a global <a href="https://github.com/hughsk/envify">envify</a> transform to your bundle.</p>

<p><code>bash
NODE_ENV=production browserify -g envify -e main.js | uglifyjs -c -m > build.js
</code></p>