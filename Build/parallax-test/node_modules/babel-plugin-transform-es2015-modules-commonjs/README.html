<h1>babel-plugin-transform-es2015-modules-commonjs</h1>

<blockquote>
  <p>This plugin transforms ES2015 modules to <a href="http://wiki.commonjs.org/wiki/Modules/1.1">CommonJS</a>.</p>
</blockquote>

<h2>Example</h2>

<p><strong>In</strong></p>

<p><code>javascript
export default 42;
</code></p>

<p><strong>Out</strong></p>

<p>```javascript
Object.defineProperty(exports, “__esModule”, {
  value: true
});</p>

<p>exports.default = 42;
```</p>

<h2>Installation</h2>

<p><code>sh
npm install --save-dev babel-plugin-transform-es2015-modules-commonjs
</code></p>

<h2>Usage</h2>

<h3>Via <code>.babelrc</code> (Recommended)</h3>

<p><strong>.babelrc</strong></p>

<p>```js
// without options
{
  “plugins”: [“transform-es2015-modules-commonjs”]
}</p>

<p>// with options
{
  “plugins”: [
    [“transform-es2015-modules-commonjs”, {
      “allowTopLevelThis”: true
    }]
  ]
}
```</p>

<h3>Via CLI</h3>

<p><code>sh
babel --plugins transform-es2015-modules-commonjs script.js
</code></p>

<h3>Via Node API</h3>

<p><code>javascript
require("babel-core").transform("code", {
  plugins: ["transform-es2015-modules-commonjs"]
});
</code></p>

<h2>Options</h2>

<h3><code>loose</code></h3>

<p><code>boolean</code>, defaults to <code>false</code>.</p>

<p>As per the spec, <code>import</code> and <code>export</code> are only allowed to be used at the top
level. When in loose mode these are allowed to be used anywhere.</p>

<p>And by default, when using exports with babel a non-enumerable <code>__esModule</code> property
is exported.</p>

<p>```javascript
var foo = exports.foo = 5;</p>

<p>Object.defineProperty(exports, “__esModule”, {
  value: true
});
```</p>

<p>In environments that don’t support this you can enable loose mode on <code>babel-plugin-transform-es2015-modules-commonjs</code>
and instead of using <code>Object.defineProperty</code> an assignment will be used instead.</p>

<p><code>javascript
var foo = exports.foo = 5;
exports.__esModule = true;
</code></p>

<h3><code>strict</code></h3>

<p><code>boolean</code>, defaults to <code>false</code></p>

<p>By default, when using exports with babel a non-enumerable <code>__esModule</code> property
is exported. In some cases this property is used to determine if the import <em>is</em> the
default export or if it <em>contains</em> the default export.</p>

<p>```javascript
var foo = exports.foo = 5;</p>

<p>Object.defineProperty(exports, “__esModule”, {
  value: true
});
```</p>

<p>In order to prevent the <code>__esModule</code> property from being exported, you can set
the <code>strict</code> option to <code>true</code>.</p>

<h3><code>noInterop</code></h3>

<p><code>boolean</code>, defaults to <code>false</code></p>

<p>By default, when using exports with babel a non-enumerable <code>__esModule</code> property
is exported. This property is then used to determine if the import <em>is</em> the default
export or if it <em>contains</em> the default export.</p>

<p>```javascript
“use strict”;</p>

<p>var _foo = require(“foo”);</p>

<p>var _foo2 = _interopRequireDefault(_foo);</p>

<p>function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}
```</p>

<p>In cases where the auto-unwrapping of <code>default</code> is not needed, you can set the
<code>noInterop</code> option to <code>true</code> to avoid the usage of the <code>interopRequireDefault</code>
helper (shown in inline form above).</p>