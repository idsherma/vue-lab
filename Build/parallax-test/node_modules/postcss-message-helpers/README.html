<h1>postcss-message-helpers <a href="https://travis-ci.org/MoOx/postcss-message-helpers"><img src="https://travis-ci.org/MoOx/postcss-message-helpers.png" alt="Build Status" /></a></h1>

<blockquote>
  <p><a href="https://github.com/postcss/postcss">PostCSS</a> helpers to throw or output GNU style messages.</p>
</blockquote>

<p>This modules offers you some function to throw or just output messages with <a href="https://www.gnu.org/prep/standards/html_node/Errors.html">GNU style</a>: <code>sourcefile:lineno:column: message</code></p>

<h2>Installation</h2>

<p><code>console
$ npm install postcss-message-helpers
</code></p>

<p><code>js
var messageHelpers = require("postcss-message-helpers")
</code></p>

<h2>Usage</h2>

<h3><code>var fnValue = messageHelpers.try(fn, source)</code></h3>

<p>Execute <code>fn</code> an return the value.
If an exception is thrown during the process, the exception will be catched, enhanced from source & re-throw.</p>

<h3><code>var sourceMessage = messageHelpers.message(message, source)</code></h3>

<p>Returns a message like <code>sourcefile:lineno:column: message</code>.<br />
<code>source</code> should be a postcss source object from a node.</p>

<h3><code>var source = messageHelpers.source(source)</code></h3>

<p>Returns <code>sourcefile:lineno:column</code> for a given <code>source</code> postcss object.</p>

<h3>Example</h3>

<p>```js
// dependencies
var fs = require(“fs”)
var postcss = require(“postcss”)
var messageHelpers = require(“postcss-message-helpers”)</p>

<p>// css to be processed
var css = fs.readFileSync(“input.css”, “utf8”)</p>

<p>// process css
var output = postcss()
  .use(function(styles) {
    styles.eachDecl(function transformDecl(decl) {
      // will catch, adjust error stack, line, column & message (gnu style) then re-throw
      messageHelpers.try(function IwillThrow() {
        if (decl.value.indexOf(“error(“) > -1) {
          throw new Error(“error detected: “ + decl.value)
        }
      }, decl.source)</p>

<pre><code>  // will output a gnu style warning
  if (decl.value.indexOf("warning(") > -1) {
    console.warning(messageHelpers.message("warning: " + decl.value, decl.source))
  }
})   })   .process(css)   .css ```
</code></pre>

<p>Checkout <a href="test">tests</a> for more examples.</p>

<hr />

<h2>Contributing</h2>

<p>Work on a branch, install dev-dependencies, respect coding style & run tests before submitting a bug fix or a feature.</p>

<pre><code>$ git clone https://github.com/MoOx/postcss-message-helpers.git
$ git checkout -b patch-1
$ npm install
$ npm test
</code></pre>

<h2><a href="CHANGELOG.md">Changelog</a></h2>

<h2><a href="LICENSE">License</a></h2>