<p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![coverage][cover]][cover-url]
[![chat][chat]][chat-url]</p>

<div align="center">
  <img width="180" height="180" hspace="10" alt="PostCSS Logo" src="http://postcss.github.io/postcss/logo.svg" />
  <a href="https://github.com/webpack/webpack">
    <img width="200" height="200" hspace="10" src="https://cdn.rawgit.com/webpack/media/e7485eb2/logo/icon.svg" />
  </a>
  <div align="center">
    <a href="https://evilmartians.com/?utm_source=postcss">
      <img src="https://evilmartians.com/badges/sponsored-by-evil-martians.svg" alt="Sponsored by Evil Martians" width="236" height="54" vspace="10" />
    </a>
  </div>
  <h1>PostCSS Loader</h1>
  <p>Loader for <a href="http://webpack.js.org/">webpack</a> to process CSS with <a href="http://postcss.org/">PostCSS</a></p>
</div>

<h2 align="center">Install</h2>

<p><code>bash
npm i -D postcss-loader
</code></p>

<h2 align="center">Usage</h2>

<h3><code>Configuration</code></h3>

<p><strong>postcss.config.js</strong>
<code>js
module.exports = {
  parser: 'sugarss',
  plugins: {
    'postcss-import': {},
    'postcss-cssnext': {},
    'cssnano': {}
  }
}
</code></p>

<p>You can read more about common PostCSS Config <a href="https://github.com/michael-ciniawsky/postcss-load-config">here</a>.</p>

<h3><code>Config Cascade</code></h3>

<p>You can use different <code>postcss.config.js</code> files in different directories.
Config lookup starts from <code>path.dirname(file)</code> and walks the file tree upwards until a config file is found.</p>

<p><code>
|– components
| |– component
| | |– index.js
| | |– index.png
| | |– style.css (1)
| | |– postcss.config.js (1)
| |– component
| | |– index.js
| | |– image.png
| | |– style.css (2)
|
|– postcss.config.js (1 && 2 (recommended))
|– webpack.config.js
|
|– package.json
</code></p>

<p>After setting up your <code>postcss.config.js</code>, add <code>postcss-loader</code> to your <code>webpack.config.js</code>. You can use it standalone or in conjunction with <code>css-loader</code> (recommended). Use it <strong>after</strong> <code>css-loader</code> and <code>style-loader</code>, but <strong>before</strong> other preprocessor loaders like e.g <code>sass|less|stylus-loader</code>, if you use any.</p>

<p><strong>webpack.config.js</strong>
<code>js
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [ 'style-loader', 'postcss-loader' ]
      }
    ]
  }
}
</code></p>

<blockquote>
  <p>⚠️  When <code>postcss-loader</code> is used standalone (without <code>css-loader</code>) don’t use <code>@import</code> in your CSS, since this can lead to quite bloated bundles</p>
</blockquote>

<p><strong>webpack.config.js (recommended)</strong>
<code>js
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          'style-loader',
          { loader: 'css-loader', options: { importLoaders: 1 } },
          'postcss-loader'
        ]
      }
    ]
  }
}
</code></p>

<h2 align="center">Options</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Name</th>
      <th style="text-align: center">Type</th>
      <th style="text-align: center">Default</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><a href="#exec"><code>exec</code></a></td>
      <td style="text-align: center"><code>{Boolean}</code></td>
      <td style="text-align: center"><code>undefined</code></td>
      <td style="text-align: left">Enable PostCSS Parser support in <code>CSS-in-JS</code></td>
    </tr>
    <tr>
      <td style="text-align: center"><a href="#syntaxes"><code>parser</code></a></td>
      <td style="text-align: center"><code>{String\|Object}</code></td>
      <td style="text-align: center"><code>undefined</code></td>
      <td style="text-align: left">Set PostCSS Parser</td>
    </tr>
    <tr>
      <td style="text-align: center"><a href="#syntaxes"><code>syntax</code></a></td>
      <td style="text-align: center"><code>{String\|Object}</code></td>
      <td style="text-align: center"><code>undefined</code></td>
      <td style="text-align: left">Set PostCSS Syntax</td>
    </tr>
    <tr>
      <td style="text-align: center"><a href="#syntaxes"><code>stringifier</code></a></td>
      <td style="text-align: center"><code>{String\|Object}</code></td>
      <td style="text-align: center"><code>undefined</code></td>
      <td style="text-align: left">Set PostCSS Stringifier</td>
    </tr>
    <tr>
      <td style="text-align: center"><a href="#config"><code>config</code></a></td>
      <td style="text-align: center"><code>{Object}</code></td>
      <td style="text-align: center"><code>undefined</code></td>
      <td style="text-align: left">Set <code>postcss.config.js</code> config path && <code>ctx</code></td>
    </tr>
    <tr>
      <td style="text-align: center"><a href="#plugins"><code>plugins</code></a></td>
      <td style="text-align: center"><code>{Array\|Function}</code></td>
      <td style="text-align: center"><code>[]</code></td>
      <td style="text-align: left">Set PostCSS Plugins</td>
    </tr>
    <tr>
      <td style="text-align: center"><a href="#sourceMap"><code>sourceMap</code></a></td>
      <td style="text-align: center"><code>{String\|Boolean}</code></td>
      <td style="text-align: center"><code>false</code></td>
      <td style="text-align: left">Enable Source Maps</td>
    </tr>
  </tbody>
</table>

<h3><code>Exec</code></h3>

<p>If you use JS styles without the <a href="https://github.com/postcss/postcss-js"><code>postcss-js</code></a> parser, add the <code>exec</code> option.</p>

<p><code>js
{
  test: /\.style.js$/,
  use: [
    'style-loader',
    { loader: 'css-loader', options: { importLoaders: 1 } },
    { loader: 'postcss-loader', options: { parser: 'sugarss', exec: true } }
  ]
}
</code></p>

<h3><code>Config</code></h3>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Name</th>
      <th style="text-align: center">Type</th>
      <th style="text-align: center">Default</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><a href="#path"><code>path</code></a></td>
      <td style="text-align: center"><code>{String}</code></td>
      <td style="text-align: center"><code>undefined</code></td>
      <td style="text-align: left">PostCSS Config Path</td>
    </tr>
    <tr>
      <td style="text-align: center"><a href="#context"><code>context</code></a></td>
      <td style="text-align: center"><code>{Object}</code></td>
      <td style="text-align: center"><code>undefined</code></td>
      <td style="text-align: left">PostCSS Config Context</td>
    </tr>
  </tbody>
</table>

<h4><code>Path</code></h4>

<p>You can manually specify the path to search for your config (<code>postcss.config.js</code>) with the <code>config.path</code> option. This is needed if you store your config  in a separate e.g <code>./config || ./.config</code> folder.</p>

<blockquote>
  <p>⚠️  Otherwise it is <strong>unnecessary</strong> to set this option and is <strong>not</strong> recommended</p>
</blockquote>

<p><strong>webpack.config.js</strong>
<code>js
{
  loader: 'postcss-loader',
  options: {
    config: {
      path: 'path/to/postcss.config.js'
    }
  }
}
</code></p>

<h4><code>Context (ctx)</code></h4>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Name</th>
      <th style="text-align: center">Type</th>
      <th style="text-align: center">Default</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><code>env</code></td>
      <td style="text-align: center"><code>{String}</code></td>
      <td style="text-align: center"><code>'development'</code></td>
      <td style="text-align: left"><code>process.env.NODE_ENV</code></td>
    </tr>
    <tr>
      <td style="text-align: center"><code>file</code></td>
      <td style="text-align: center"><code>{Object}</code></td>
      <td style="text-align: center"><code>loader.resourcePath</code></td>
      <td style="text-align: left"><code>extname</code>, <code>dirname</code>, <code>basename</code></td>
    </tr>
    <tr>
      <td style="text-align: center"><code>options</code></td>
      <td style="text-align: center"><code>{Object}</code></td>
      <td style="text-align: center"><code>{}</code></td>
      <td style="text-align: left">Options</td>
    </tr>
  </tbody>
</table>

<p><code>postcss-loader</code> exposes context <code>ctx</code> to the config file, making your <code>postcss.config.js</code> dynamic, so can use it to do some real magic ✨</p>

<p><strong>postcss.config.js</strong>
<code>js
module.exports = ({ file, options, env }) => ({
  parser: file.extname === '.sss' ? 'sugarss' : false,
  plugins: {
    'postcss-import': { root: file.dirname },
    'postcss-cssnext': options.cssnext ? options.cssnext : false,
    'autoprefixer': env == 'production' ? options.autoprefixer : false,
    'cssnano': env === 'production' ? options.cssnano : false
  }
})
</code></p>

<p><strong>webpack.config.js</strong>
<code>js
{
  loader: 'postcss-loader',
  options: {
    config: {
      ctx: {
        cssnext: {...options},
        cssnano: {...options},
        autoprefixer: {...options}
      }
    }
  }
}
</code></p>

<h3><code>Plugins</code></h3>

<p><strong>webpack.config.js</strong>
<code>js
{
  loader: 'postcss-loader',
  options: {
    ident: 'postcss',
    plugins: (loader) => [
      require('postcss-import')({ root: loader.resourcePath }),
      require('postcss-cssnext')(),
      require('autoprefixer')(),
      require('cssnano')()
    ]
  }
}
</code></p>

<blockquote>
  <p>⚠️  webpack requires an identifier (<code>ident</code>) in <code>options</code> when <code>{Function}/require</code> is used (Complex Options). The <code>ident</code> can be freely named as long as it is unique. It’s recommended to name it (<code>ident: 'postcss'</code>)</p>
</blockquote>

<h3><code>Syntaxes</code></h3>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Name</th>
      <th style="text-align: center">Type</th>
      <th style="text-align: center">Default</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><a href="#parser"><code>parser</code></a></td>
      <td style="text-align: center"><code>{String\|Function}</code></td>
      <td style="text-align: center"><code>undefined</code></td>
      <td style="text-align: left">Custom PostCSS Parser</td>
    </tr>
    <tr>
      <td style="text-align: center"><a href="#syntax"><code>syntax</code></a></td>
      <td style="text-align: center"><code>{String\|Function}</code></td>
      <td style="text-align: center"><code>undefined</code></td>
      <td style="text-align: left">Custom PostCSS Syntax</td>
    </tr>
    <tr>
      <td style="text-align: center"><a href="#stringifier"><code>stringifier</code></a></td>
      <td style="text-align: center"><code>{String\|Function}</code></td>
      <td style="text-align: center"><code>undefined</code></td>
      <td style="text-align: left">Custom PostCSS Stringifier</td>
    </tr>
  </tbody>
</table>

<h4><code>Parser</code></h4>

<p><strong>webpack.config.js</strong>
<code>js
{
  test: /\.sss$/,
  use: [
    ...,
    { loader: 'postcss-loader', options: { parser: 'sugarss' } }
  ]
}
</code></p>

<h4><code>Syntax</code></h4>

<p><strong>webpack.config.js</strong>
<code>js
{
  test: /\.css$/,
  use: [
    ...,
    { loader: 'postcss-loader', options: { syntax: 'sugarss' } }
  ]
}
</code></p>

<h4><code>Stringifier</code></h4>

<p><strong>webpack.config.js</strong>
<code>js
{
  test: /\.css$/,
  use: [
    ...,
    { loader: 'postcss-loader', options: { stringifier: 'midas' } }
  ]
}
</code></p>

<h3><code>SourceMap</code></h3>

<p>Enables source map support, <code>postcss-loader</code> will use the previous source map given by other loaders and update it accordingly, if no previous loader is applied before <code>postcss-loader</code>, the loader will generate a source map for you.</p>

<blockquote>
  <p>:warning: If a previous loader like e.g <code>sass-loader</code> is applied and it’s <code>sourceMap</code> option is set, but the <code>sourceMap</code> option in <code>postcss-loader</code> is omitted, previous source maps will be discarded by <code>postcss-loader</code> <strong>entirely</strong>.</p>
</blockquote>

<p><strong>webpack.config.js</strong>
<code>js
{
  test: /\.css/,
  use: [
    { loader: 'style-loader', options: { sourceMap: true } },
    { loader: 'css-loader', options: { sourceMap: true } },
    { loader: 'postcss-loader', options: { sourceMap: true } },
    { loader: 'sass-loader', options: { sourceMap: true } }
  ]
}
</code></p>

<h4><code>'inline'</code></h4>

<p>You can set the <code>sourceMap: 'inline'</code> option to inline the source map
within the CSS directly as an annotation comment.</p>

<p><strong>webpack.config.js</strong>
<code>js
{
  loader: 'postcss-loader',
  options: {
    sourceMap: 'inline'
  }
}
</code></p>

<p>```css
.class { color: red; }</p>

<p>/*# sourceMappingURL=data:application/json;base64, … */
```</p>

<h2 align="center">Examples</h2>

<h3><code>Stylelint</code></h3>

<p><strong>webpack.config.js</strong>
<code>js
{
  test: /\.css$/,
  use: [
    'style-loader',
    'css-loader',
    {
      loader: 'postcss-loader',
      options: {
        ident: 'postcss',
        plugins: [
          require('postcss-import')(),
          require('stylelint')(),
          ...,
        ]
      }
    }
  ]
}
</code></p>

<h3><code>CSS Modules</code></h3>

<p>This loader <a href="https://github.com/webpack/css-loader/issues/137">cannot be used</a> with <a href="https://github.com/webpack/css-loader#css-modules">CSS Modules</a> out of the box due
to the way <code>css-loader</code> processes file imports. To make them work properly,
either add the css-loader’s <a href="https://github.com/webpack-contrib/css-loader#importloaders"><code>importLoaders</code></a> option.</p>

<p><strong>webpack.config.js</strong>
<code>js
{
  test: /\.css$/,
  use: [
    'style-loader',
    { loader: 'css-loader', options: { modules: true, importLoaders: 1 } },
    'postcss-loader'
  ]
}
</code></p>

<p>or use <a href="https://github.com/outpunk/postcss-modules">postcss-modules</a> instead of <code>css-loader</code>.</p>

<h3><code>CSS-in-JS</code></h3>

<p>If you want to process styles written in JavaScript, use the <a href="https://github.com/postcss/postcss-js">postcss-js</a> parser.</p>

<p><code>js
{
  test: /\.style.js$/,
  use: [
    'style-loader',
    { loader: 'css-loader', options: { importLoaders: 2 } },
    { loader: 'postcss-loader', options: { parser: 'postcss-js' } },
    'babel-loader'
  ]
}
</code></p>

<p>As result you will be able to write styles in the following way</p>

<p>```js
import colors from ‘./styles/colors’</p>

<p>export default {
    ‘.menu’: {
      color: colors.main,
      height: 25,
      ‘&_link’: {
      color: ‘white’
    }
  }
}
```</p>

<blockquote>
  <p>:warning: If you are using Babel you need to do the following in order for the setup to work</p>
</blockquote>

<blockquote>
  <ol>
    <li>Add <a href="https://github.com/59naga/babel-plugin-add-module-exports">babel-plugin-add-module-exports</a> to your configuration</li>
    <li>You need to have only one <strong>default</strong> export per style module</li>
  </ol>
</blockquote>

<h3><a href="https://github.com/webpack-contrib/extract-text-webpack-plugin">Extract CSS</a></h3>

<p><strong>webpack.config.js</strong>
```js
const ExtractTextPlugin = require(‘extract-text-webpack-plugin’)</p>

<p>module.exports = {
  module: {
    rules: [
      {
        test: /.css$/,
        use: ExtractTextPlugin.extract({
          fallback: ‘style-loader’,
          use: [
            { loader: ‘css-loader’, options: { importLoaders: 1 } },
            ‘postcss-loader’
          ]
        })
      }
    ]
  },
  plugins: [
    new ExtractTextPlugin(‘[name].css’)
  ]
}
```</p>

<h2 align="center">Maintainers</h2>

<table>
  <tbody>
    <tr>
      <td align="center">
        <a href="https://github.com/michael-ciniawsky">
          <img width="150" height="150" src="https://github.com/michael-ciniawsky.png?v=3&s=150" />
          
          Michael Ciniawsky
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/evilebottnawi">
          <img width="150" height="150" src="https://github.com/evilebottnawi.png?v=3&s=150" />
          
          Alexander Krasnoyarov
        </a>
      </td>
    </tr>
  <tbody>



[npm]: https://img.shields.io/npm/v/postcss-loader.svg
[npm-url]: https://npmjs.com/package/postcss-loader

[node]: https://img.shields.io/node/v/postcss-loader.svg
[node-url]: https://nodejs.org

[deps]: https://david-dm.org/postcss/postcss-loader.svg
[deps-url]: https://david-dm.org/postcss/postcss-loader

[tests]: http://img.shields.io/travis/postcss/postcss-loader.svg
[tests-url]: https://travis-ci.org/postcss/postcss-loader

[cover]: https://coveralls.io/repos/github/postcss/postcss-loader/badge.svg
[cover-url]: https://coveralls.io/github/postcss/postcss-loader

[chat]: https://badges.gitter.im/postcss/postcss.svg
[chat-url]: https://gitter.im/postcss/postcss
</tbody></tbody></table>