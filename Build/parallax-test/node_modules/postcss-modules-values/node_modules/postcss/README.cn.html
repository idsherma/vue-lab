<h1>PostCSS <a href="https://travis-ci.org/postcss/postcss"><img src="https://img.shields.io/travis/postcss/postcss.svg?label=unix" alt="Travis Build Status" /></a> <a href="https://ci.appveyor.com/project/ai/postcss"><img src="https://img.shields.io/appveyor/ci/ai/postcss.svg?label=windows" alt="AppVeyor Build Status" /></a> <a href="https://gitter.im/postcss/postcss"><img src="https://img.shields.io/badge/Gitter-Join_the_PostCSS_chat-brightgreen.svg" alt="Gitter" /></a></h1>

<p><img align="right" width="95" height="95" alt="哲学家的石头 - PostCSS 的 logo" src="http://postcss.github.io/postcss/logo.svg" /></p>

<p>PostCSS 是一个允许使用 JS 插件转换样式的工具。
这些插件可以检查（lint）你的 CSS，支持 CSS Variables 和 Mixins，
编译尚未被浏览器广泛支持的先进的 CSS 语法，内联图片，以及其它很多优秀的功能。</p>

<p>PostCSS 在工业界被广泛地应用，其中不乏很多有名的行业领导者，如：维基百科，Twitter，阿里巴巴，
JetBrains。PostCSS 的 <a href="https://github.com/postcss/autoprefixer">Autoprefixer</a> 插件是最流行的 CSS 处理工具之一。</p>

<p><strong>Twitter 账号:</strong> <a href="https://twitter.com/postcss">@postcss</a>。<br />
<strong>支持 / 讨论:</strong>   <a href="https://gitter.im/postcss/postcss">Gitter</a>。<br /></p>

<p>如果需要 PostCSS 商业支持（如咨询，提升公司的前端文化，
PostCSS 插件），请联系 <a href="https://evilmartians.com/?utm_source=postcss">Evil Martians</a>
邮箱 <a href="mailto:surrender@evilmartians.com">surrender@evilmartians.com</a>。</p>

<p><a href="https://evilmartians.com/?utm_source=postcss">
  <img src="https://evilmartians.com/badges/sponsored-by-evil-martians.svg" alt="由 Evil Martians 赞助" width="236" height="54" />
</a></p>

<h2>插件</h2>

<p>截止到目前，PostCSS 有 200 多个插件。你可以在 <a href="https://github.com/postcss/postcss/blob/master/docs/plugins.md">插件列表</a> 或 <a href="http://postcss.parts">搜索目录</a> 找到它们。
下方的列表是我们最喜欢的插件 - 它们很好地演示了我们可以用 PostCSS 做些什么。</p>

<p>如果你有任何新的想法，<a href="https://github.com/postcss/postcss/blob/master/docs/writing-a-plugin.md">开发 PostCSS 插件</a> 非常简单易上手。</p>

<h3>解决全局 CSS 的问题</h3>

<ul>
  <li><a href="https://github.com/postcss/postcss-use"><code>postcss-use</code></a> 允许你在 CSS 里明确地设置 PostCSS 插件，并且只在当前文件执行它们。</li>
  <li><a href="https://github.com/outpunk/postcss-modules"><code>postcss-modules</code></a> 和 <a href="https://github.com/gajus/react-css-modules"><code>react-css-modules</code></a> 可以自动以组件为单位隔绝 CSS 选择器。</li>
  <li><a href="https://github.com/maximkoretskiy/postcss-autoreset"><code>postcss-autoreset</code></a> 是全局样式重置的又一个选择，它更适用于分离的组件。</li>
  <li><a href="https://github.com/maximkoretskiy/postcss-initial"><code>postcss-initial</code></a> 添加了 <code>all: initial</code> 的支持，重置了所有继承的样式。</li>
  <li><a href="https://github.com/ausi/cq-prolyfill"><code>cq-prolyfill</code></a> 添加了容器查询的支持，允许添加响应于父元素宽度的样式.</li>
</ul>

<h3>提前使用先进的 CSS 特性</h3>

<ul>
  <li><a href="https://github.com/postcss/autoprefixer"><code>autoprefixer</code></a> 添加了 vendor 浏览器前缀，它使用 Can I Use 上面的数据。</li>
  <li><a href="http://cssnext.io"><code>postcss-cssnext</code></a> 允许你使用未来的 CSS 特性（包括 <code>autoprefixer</code>）。</li>
  <li><a href="https://github.com/SuperOl3g/postcss-image-set-polyfill"><code>postcss-image-set-polyfill</code></a> 为所有浏览器模拟了 <a href="https://drafts.csswg.org/css-images-4/#image-set-notation"><code>image-set</code></a> 函数逻辑。</li>
</ul>

<h3>更佳的 CSS 可读性</h3>

<ul>
  <li><a href="https://github.com/jonathantneal/precss"><code>precss</code></a> 囊括了许多插件来支持类似 Sass 的特性，比如 CSS 变量，套嵌，mixins 等。</li>
  <li><a href="https://github.com/hudochenkov/postcss-sorting"><code>postcss-sorting</code></a> 给规则的内容以及@规则排序。</li>
  <li><a href="https://github.com/ismamz/postcss-utilities"><code>postcss-utilities</code></a> 囊括了最常用的简写方式和书写帮助。</li>
  <li><a href="https://github.com/jonathantneal/postcss-short"><code>short</code></a> 添加并拓展了大量的缩写属性。</li>
</ul>

<h3>图片和字体</h3>

<ul>
  <li><a href="https://github.com/assetsjs/postcss-assets"><code>postcss-assets</code></a> 可以插入图片尺寸和内联文件。</li>
  <li><a href="https://github.com/2createStudio/postcss-sprites"><code>postcss-sprites</code></a> 能生成雪碧图。</li>
  <li><a href="https://github.com/jonathantneal/postcss-font-magician"><code>font-magician</code></a> 生成所有在 CSS 里需要的 <code>@font-face</code> 规则。</li>
  <li><a href="https://github.com/TrySound/postcss-inline-svg"><code>postcss-inline-svg</code></a> 允许你内联 SVG 并定制它的样式。</li>
  <li><a href="https://github.com/jonathantneal/postcss-write-svg"><code>postcss-write-svg</code></a> 允许你在 CSS 里写简单的 SVG。</li>
</ul>

<h3>提示器（Linters）</h3>

<ul>
  <li><a href="https://github.com/stylelint/stylelint"><code>stylelint</code></a> 是一个模块化的样式提示器。</li>
  <li><a href="https://github.com/morishitter/stylefmt"><code>stylefmt</code></a> 是一个能根据 <code>stylelint</code> 规则自动优化 CSS 格式的工具。</li>
  <li><a href="https://github.com/anandthakker/doiuse"><code>doiuse</code></a> 提示 CSS 的浏览器支持性，使用的数据来自于 Can I Use。</li>
  <li><a href="https://github.com/SlexAxton/css-colorguard"><code>colorguard</code></a> 帮助你保持一个始终如一的调色板。</li>
</ul>

<h3>其它</h3>

<ul>
  <li><a href="https://github.com/vkalinichev/postcss-rtl"><code>postcss-rtl</code></a> 在单个 CSS 文件里组合了两个方向（左到右，右到左）的样式。</li>
  <li><a href="http://cssnano.co"><code>cssnano</code></a> 是一个模块化的 CSS 压缩器。</li>
  <li><a href="https://github.com/peterramsing/lost"><code>lost</code></a> 是一个功能强大的 <code>calc()</code> 栅格系统。</li>
  <li><a href="https://github.com/MohammadYounes/rtlcss"><code>rtlcss</code></a> 镜像翻转 CSS 样式，适用于 right-to-left 的应用场景。</li>
</ul>

<h2>语法</h2>

<p>PostCSS 可以转化样式到任意语法，不仅仅是 CSS。
如果还没有支持你最喜欢的语法，你可以编写一个解释器以及（或者）一个 stringifier 来拓展 PostCSS。</p>

<ul>
  <li><a href="https://github.com/postcss/sugarss"><code>sugarss</code></a> 是一个以缩进为基础的语法，类似于 Sass 和 Stylus。</li>
  <li><a href="https://github.com/gucong3000/postcss-html"><code>postcss-html</code></a> 允许你在 HTML / <a href="https://daringfireball.net/projects/markdown/syntax">Markdown</a> / <a href="https://vue-loader.vuejs.org/">Vue component</a> 里编写样式。</li>
  <li><a href="https://github.com/postcss/postcss-scss"><code>postcss-scss</code></a> 允许你使用 SCSS <em>(但并没有将 SCSS 编译到 CSS)</em>。</li>
  <li><a href="https://github.com/AleshaOleg/postcss-sass"><code>postcss-sass</code></a> 允许你使用 Sass <em>(但并没有将 Sass 编译到 CSS)</em>。</li>
  <li><a href="https://github.com/webschik/postcss-less"><code>postcss-less</code></a> 允许你使用 Less <em>(但并没有将 LESS 编译到 CSS)</em>。</li>
  <li><a href="https://github.com/Crunch/postcss-less"><code>postcss-less-engine</code></a> 允许你使用 Less <em>(并且使用真正的 Less.js 把 LESS 编译到 CSS)</em>。</li>
  <li><a href="https://github.com/postcss/postcss-js"><code>postcss-js</code></a> 允许你在 JS 里编写样式，或者转换成 React 的内联样式／Radium／JSS。</li>
  <li><a href="https://github.com/postcss/postcss-safe-parser"><code>postcss-safe-parser</code></a> 查找并修复 CSS 语法错误。</li>
  <li><a href="https://github.com/ben-eb/midas"><code>midas</code></a> 将 CSS 字符串转化成高亮的 HTML。</li>
</ul>

<h2>文章</h2>

<ul>
  <li><a href="http://julian.io/some-things-you-may-think-about-postcss-and-you-might-be-wrong">一些你对 PostCSS 可能产生的误解</a></li>
  <li><a href="http://davidtheclark.com/its-time-for-everyone-to-learn-about-postcss">PostCSS 究竟是什么，是做什么的</a></li>
  <li><a href="http://webdesign.tutsplus.com/series/postcss-deep-dive--cms-889">PostCSS 指南</a></li>
</ul>

<p>你可以在 <a href="https://github.com/jjaderg/awesome-postcss">awesome-postcss</a> 列表里找到更多优秀的文章和视频。</p>

<h2>书籍</h2>

<ul>
  <li>Alex Libby, Packt 的 <a href="https://www.packtpub.com/web-development/mastering-postcss-web-design">网页设计之精通 PostCSS</a> (2016年6月)</li>
</ul>

<h2>使用方法</h2>

<p>你可以通过简单的两步便开始使用 PostCSS：</p>

<ol>
  <li>在你的构建工具中查找并添加 PostCSS 拓展。</li>
  <li><a href="http://postcss.parts">选择插件</a>并将它们添加到你的 PostCSS 处理队列中。</li>
</ol>

<h3>Webpack</h3>

<p>在 <code>webpack.config.js</code> 里使用 <a href="https://github.com/postcss/postcss-loader"><code>postcss-loader</code></a> :</p>

<p><code>js
module.exports = {
    module: {
        rules: [
            {
                test: /\.css$/,
                exclude: /node_modules/,
                use: [
                    {
                        loader: 'style-loader',
                    },
                    {
                        loader: 'css-loader',
                        options: {
                            importLoaders: 1,
                        }
                    },
                    {
                        loader: 'postcss-loader'
                    }
                ]
            }
        ]
    }
}
</code></p>

<p>然后创建 <code>postcss.config.js</code>:</p>

<p><code>js
module.exports = {
    plugins: [
        require('precss'),
        require('autoprefixer')
    ]
}
</code></p>

<h3>Gulp</h3>

<p>使用 <a href="https://github.com/postcss/gulp-postcss"><code>gulp-postcss</code></a> 和 <a href="https://github.com/floridoo/gulp-sourcemaps"><code>gulp-sourcemaps</code></a>.</p>

<p>```js
gulp.task(‘css’, function () {
    var postcss    = require(‘gulp-postcss’);
    var sourcemaps = require(‘gulp-sourcemaps’);</p>

<pre><code>return gulp.src('src/**/*.css')
    .pipe( sourcemaps.init() )
    .pipe( postcss([ require('precss'), require('autoprefixer') ]) )
    .pipe( sourcemaps.write('.') )
    .pipe( gulp.dest('build/') ); }); ```
</code></pre>

<h3>npm run / CLI</h3>

<p>如果需要在你的命令行界面或 npm 脚本里使用 PostCSS，你可以使用 <a href="https://github.com/postcss/postcss-cli"><code>postcss-cli</code></a>。</p>

<p><code>sh
postcss --use autoprefixer -c options.json -o main.css css/*.css
</code></p>

<h3>浏览器</h3>

<p>如果你想编译浏览器里的 CSS 字符串（例如像 CodePen 一样的在线编辑器），
只需使用 <a href="http://browserify.org/">Browserify</a> 或  <a href="https://webpack.github.io/">webpack</a>。它们会把 PostCSS 和插件文件打包进一个独立文件。</p>

<p>如果想要在 React 内联样式／JSS／Radium／其它 <a href="https://github.com/MicheleBertoli/css-in-js">CSS-in-JS</a> 里使用 PostCSS，
你可以用 <a href="https://github.com/postcss/postcss-js"><code>postcss-js</code></a> 然后转换样式对象。</p>

<p>```js
var postcss  = require(‘postcss-js’);
var prefixer = postcss.sync([ require(‘autoprefixer’) ]);</p>

<p>prefixer({ display: ‘flex’ }); //=> { display: [‘-webkit-box’, ‘-webkit-flex’, ‘-ms-flexbox’, ‘flex’] }
```</p>

<h3>运行器</h3>

<ul>
  <li><strong>Grunt</strong>: <a href="https://github.com/nDmitry/grunt-postcss"><code>grunt-postcss</code></a></li>
  <li><strong>HTML</strong>: <a href="https://github.com/posthtml/posthtml-postcss"><code>posthtml-postcss</code></a></li>
  <li><strong>Stylus</strong>: <a href="https://github.com/seaneking/poststylus"><code>poststylus</code></a></li>
  <li><strong>Rollup</strong>: <a href="https://github.com/egoist/rollup-plugin-postcss"><code>rollup-plugin-postcss</code></a></li>
  <li><strong>Brunch</strong>: <a href="https://github.com/brunch/postcss-brunch"><code>postcss-brunch</code></a></li>
  <li><strong>Broccoli</strong>: <a href="https://github.com/jeffjewiss/broccoli-postcss"><code>broccoli-postcss</code></a></li>
  <li><strong>Meteor</strong>: <a href="https://atmospherejs.com/juliancwirko/postcss"><code>postcss</code></a></li>
  <li><strong>ENB</strong>: <a href="https://github.com/awinogradov/enb-postcss"><code>enb-postcss</code></a></li>
  <li><strong>Taskr</strong>: <a href="https://github.com/lukeed/taskr/tree/master/packages/postcss"><code>taskr-postcss</code></a></li>
  <li><strong>Start</strong>: <a href="https://github.com/start-runner/postcss"><code>start-postcss</code></a></li>
  <li><strong>Connect/Express</strong>: <a href="https://github.com/jedmao/postcss-middleware"><code>postcss-middleware</code></a></li>
</ul>

<h3>JS API</h3>

<p>对于其它的应用环境，你可以使用 JS API：</p>

<p>```js
const fs = require(‘fs’);
const postcss = require(‘postcss’);
const precss = require(‘precss’);
const autoprefixer = require(‘autoprefixer’);</p>

<p>fs.readFile(‘src/app.css’, (err, css) => {
    postcss([precss, autoprefixer])
        .process(css, { from: ‘src/app.css’, to: ‘dest/app.css’ })
        .then(result => {
            fs.writeFile(‘dest/app.css’, result.css);
            if ( result.map ) fs.writeFile(‘dest/app.css.map’, result.map);
        });
});
```</p>

<p>阅读 <a href="http://api.postcss.org/postcss.html">PostCSS API 文档</a> 获取更多有关 JS API 的信息.</p>

<p>所有的 PostCSS 运行器应当通过 <a href="https://github.com/postcss/postcss/blob/master/docs/guidelines/runner.md">PostCSS 运行器指南</a>。</p>

<h3>配置选项</h3>

<p>绝大多数 PostCSS 运行器接受两个参数：</p>

<ul>
  <li>一个包含所需插件的数组</li>
  <li>一个配置选项的对象</li>
</ul>

<p>常见的选项：</p>

<ul>
  <li><code>syntax</code>: 一个提供了语法解释器和 stringifier 的对象。</li>
  <li><code>parser</code>: 一个特殊的语法解释器（例如 <a href="https://github.com/postcss/postcss-scss">SCSS</a>）。</li>
  <li><code>stringifier</code>: 一个特殊的语法 output 生成器（例如 <a href="https://github.com/ben-eb/midas">Midas</a>）。</li>
  <li><code>map</code>: <a href="https://github.com/postcss/postcss/blob/master/docs/source-maps.md">source map 选项</a>.</li>
  <li><code>from</code>: input 文件名称（大多数运行器自动设置了这个）。</li>
  <li><code>to</code>: output 文件名称（大多数运行器自动设置了这个）。</li>
</ul>

<h3>Atom</h3>

<ul>
  <li><a href="https://atom.io/packages/language-postcss"><code>language-postcss</code></a> 添加了 PostCSS 和 <a href="https://github.com/postcss/sugarss">SugarSS</a> 代码高亮。</li>
  <li><a href="https://atom.io/packages/source-preview-postcss"><code>source-preview-postcss</code></a> 在一个独立窗口里实时预览生成的 CSS。</li>
</ul>

<h3>Sublime Text</h3>

<ul>
  <li><a href="https://github.com/hudochenkov/Syntax-highlighting-for-PostCSS"><code>Syntax-highlighting-for-PostCSS</code></a> 添加了 PostCSS 代码高亮。</li>
</ul>

<h3>Vim</h3>

<ul>
  <li><a href="https://github.com/stephenway/postcss.vim"><code>postcss.vim</code></a> 添加了 PostCSS 代码高亮。</li>
</ul>

<h3>WebStorm</h3>

<p>自 WebStorm 2016.3 开始，<a href="https://blog.jetbrains.com/webstorm/2016/08/webstorm-2016-3-early-access-preview/">提供了</a> 内建的 PostCSS 支持。</p>