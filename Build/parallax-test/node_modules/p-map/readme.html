<h1>p-map <a href="https://travis-ci.org/sindresorhus/p-map"><img src="https://travis-ci.org/sindresorhus/p-map.svg?branch=master" alt="Build Status" /></a></h1>

<blockquote>
  <p>Map over promises concurrently</p>
</blockquote>

<p>Useful when you need to run promise-returning & async functions multiple times with different inputs concurrently.</p>

<h2>Install</h2>

<p><code>
$ npm install p-map
</code></p>

<h2>Usage</h2>

<p>```js
const pMap = require(‘p-map’);
const got = require(‘got’);</p>

<p>const sites = [
	getWebsiteFromUsername(‘sindresorhus’), //=> Promise
	‘ava.li’,
	‘todomvc.com’,
	‘github.com’
];</p>

<p>const mapper = el => got.head(el).then(res => res.requestUrl);</p>

<p>pMap(sites, mapper, {concurrency: 2}).then(result => {
	console.log(result);
	//=> [‘http://sindresorhus.com/’, ‘http://ava.li/’, ‘http://todomvc.com/’, ‘http://github.com/’]
});
```</p>

<h2>API</h2>

<h3>pMap(input, mapper, [options])</h3>

<p>Returns a <code>Promise</code> that is fulfilled when all promises in <code>input</code> and ones returned from <code>mapper</code> are fulfilled, or rejects if any of the promises reject. The fulfilled value is an <code>Array</code> of the fulfilled values returned from <code>mapper</code> in <code>input</code> order.</p>

<h4>input</h4>

<p>Type: <code>Iterable<Promise|any></code></p>

<p>Iterated over concurrently in the <code>mapper</code> function.</p>

<h4>mapper(element, index)</h4>

<p>Type: <code>Function</code></p>

<p>Expected to return a <code>Promise</code> or value.</p>

<h4>options</h4>

<p>Type: <code>Object</code></p>

<h5>concurrency</h5>

<p>Type: <code>number</code><br />
Default: <code>Infinity</code><br />
Minimum: <code>1</code></p>

<p>Number of concurrently pending promises returned by <code>mapper</code>.</p>

<h2>Related</h2>

<ul>
  <li><a href="https://github.com/sindresorhus/p-all">p-all</a> - Run promise-returning & async functions concurrently with optional limited concurrency</li>
  <li><a href="https://github.com/sindresorhus/p-filter">p-filter</a> - Filter promises concurrently</li>
  <li><a href="https://github.com/sindresorhus/p-times">p-times</a> - Run promise-returning & async functions a specific number of times concurrently</li>
  <li><a href="https://github.com/sindresorhus/p-props">p-props</a> - Like <code>Promise.all()</code> but for <code>Map</code> and <code>Object</code></li>
  <li><a href="https://github.com/sindresorhus/p-map-series">p-map-series</a> - Map over promises serially</li>
  <li><a href="https://github.com/sindresorhus/p-queue">p-queue</a> - Promise queue with concurrency control</li>
  <li><a href="https://github.com/sindresorhus/promise-fun">More…</a></li>
</ul>

<h2>License</h2>

<p>MIT © <a href="https://sindresorhus.com">Sindre Sorhus</a></p>