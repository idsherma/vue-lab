<h1>node-http-signature</h1>

<p>node-http-signature is a node.js library that has client and server components
for Joyent’s <a href="http_signing.md">HTTP Signature Scheme</a>.</p>

<h2>Usage</h2>

<p>Note the example below signs a request with the same key/cert used to start an
HTTP server. This is almost certainly not what you actually want, but is just
used to illustrate the API calls; you will need to provide your own key
management in addition to this library.</p>

<h3>Client</h3>

<p>```js
var fs = require(‘fs’);
var https = require(‘https’);
var httpSignature = require(‘http-signature’);</p>

<p>var key = fs.readFileSync(‘./key.pem’, ‘ascii’);</p>

<p>var options = {
  host: ‘localhost’,
  port: 8443,
  path: ‘/’,
  method: ‘GET’,
  headers: {}
};</p>

<p>// Adds a ‘Date’ header in, signs it, and adds the
// ‘Authorization’ header in.
var req = https.request(options, function(res) {
  console.log(res.statusCode);
});</p>

<p>httpSignature.sign(req, {
  key: key,
  keyId: ‘./cert.pem’
});</p>

<p>req.end();
```</p>

<h3>Server</h3>

<p>```js
var fs = require(‘fs’);
var https = require(‘https’);
var httpSignature = require(‘http-signature’);</p>

<p>var options = {
  key: fs.readFileSync(‘./key.pem’),
  cert: fs.readFileSync(‘./cert.pem’)
};</p>

<p>https.createServer(options, function (req, res) {
  var rc = 200;
  var parsed = httpSignature.parseRequest(req);
  var pub = fs.readFileSync(parsed.keyId, ‘ascii’);
  if (!httpSignature.verifySignature(parsed, pub))
    rc = 401;</p>

<p>res.writeHead(rc);
  res.end();
}).listen(8443);
```</p>

<h2>Installation</h2>

<pre><code>npm install http-signature
</code></pre>

<h2>License</h2>

<p>MIT.</p>

<h2>Bugs</h2>

<p>See <a href="https://github.com/joyent/node-http-signature/issues">https://github.com/joyent/node-http-signature/issues</a>.</p>