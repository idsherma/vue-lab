<h1 id="table">Table</h1>

<p><a href="https://travis-ci.org/gajus/table"><img src="http://img.shields.io/travis/gajus/table/master.svg?style=flat" alt="Travis build status" /></a>
<a href="https://www.npmjs.com/package/table"><img src="http://img.shields.io/npm/v/table.svg?style=flat" alt="NPM version" /></a>
<a href="https://github.com/gajus/canonical"><img src="https://img.shields.io/badge/code%20style-canonical-brightgreen.svg?style=flat" alt="js-canonical-style" /></a></p>

<ul>
  <li><a href="#table">Table</a>
    <ul>
      <li><a href="#table-features">Features</a></li>
      <li><a href="#table-usage">Usage</a>
        <ul>
          <li><a href="#table-usage-cell-content-alignment">Cell Content Alignment</a></li>
          <li><a href="#table-usage-column-width">Column Width</a></li>
          <li><a href="#table-usage-custom-border">Custom Border</a></li>
          <li><a href="#table-usage-draw-horizontal-line">Draw Horizontal Line</a></li>
          <li><a href="#table-usage-padding-cell-content">Padding Cell Content</a></li>
          <li><a href="#table-usage-predefined-border-templates">Predefined Border Templates</a></li>
          <li><a href="#table-usage-streaming">Streaming</a></li>
          <li><a href="#table-usage-text-truncation">Text Truncation</a></li>
          <li><a href="#table-usage-text-wrapping">Text Wrapping</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>Produces a string that represents array data in a text table.</p>

<p><img src="./.README/demo.png" alt="Demo of table displaying a list of missions to the Moon." /></p>

<h2 id="table-features">Features</h2>

<ul>
  <li>Works with strings containing <a href="https://en.wikipedia.org/wiki/Halfwidth_and_fullwidth_forms">fullwidth</a> characters.</li>
  <li>Works with strings containing <a href="https://en.wikipedia.org/wiki/ANSI_escape_code">ANSI escape codes</a>.</li>
  <li>Configurable border characters.</li>
  <li>Configurable content alignment per column.</li>
  <li>Configurable content padding per column.</li>
  <li>Configurable column width.</li>
  <li>Text wrapping.</li>
</ul>

<h2 id="table-usage">Usage</h2>

<p>Table data is described using an array (rows) of array (cells).</p>

<p>```js
import table from ‘table’;</p>

<p>let data,
    output;</p>

<p>data = [
    [‘0A’, ‘0B’, ‘0C’],
    [‘1A’, ‘1B’, ‘1C’],
    [‘2A’, ‘2B’, ‘2C’]
];</p>

<p>/**
 * @typedef {string} table~cell
 */</p>

<p>/**
 * @typedef {table~cell[]} table~row
 */</p>

<p>/**
 * @typedef {Object} table~columns
 * @property {string} alignment Cell content alignment (enum: left, center, right) (default: left).
 * @property {number} width Column width (default: auto).
 * @property {number} truncate Number of characters are which the content will be truncated (default: Infinity).
 * @property {number} paddingLeft Cell content padding width left (default: 1).
 * @property {number} paddingRight Cell content padding width right (default: 1).
 */</p>

<p>/**
 * @typedef {Object} table~border
 * @property {string} topBody
 * @property {string} topJoin
 * @property {string} topLeft
 * @property {string} topRight
 * @property {string} bottomBody
 * @property {string} bottomJoin
 * @property {string} bottomLeft
 * @property {string} bottomRight
 * @property {string} bodyLeft
 * @property {string} bodyRight
 * @property {string} bodyJoin
 * @property {string} joinBody
 * @property {string} joinLeft
 * @property {string} joinRight
 * @property {string} joinJoin
 */</p>

<p>/**
 * Used to dynamically tell table whether to draw a line separating rows or not.
 * The default behavior is to always return true.
 *
 * @typedef {function} drawJoin
 * @param {number} index
 * @param {number} size
 * @return {boolean}
 */</p>

<p>/**
 * @typedef {Object} table~config
 * @property {table~border} border
 * @property {table~columns[]} columns Column specific configuration.
 * @property {table~columns} columnDefault Default values for all columns. Column specific settings overwrite the default values.
 * @property {table~drawJoin} drawHorizontalLine
 */</p>

<p>/**
 * Generates a text table.
 *
 * @param {table~row[]} rows
 * @param {table~config} config
 * @return {String}
 */
output = table(data);</p>

<p>console.log(output);
```</p>

<p><code>
╔════╤════╤════╗
║ 0A │ 0B │ 0C ║
╟────┼────┼────╢
║ 1A │ 1B │ 1C ║
╟────┼────┼────╢
║ 2A │ 2B │ 2C ║
╚════╧════╧════╝
</code></p>

<h3 id="table-usage-cell-content-alignment">Cell Content Alignment</h3>

<p><code>{string} config.columns[{number}].alignment</code> property controls content horizontal alignment within a cell.</p>

<p>Valid values are: “left”, “right” and “center”.</p>

<p>```js
let config,
    data,
    output;</p>

<p>data = [
    [‘0A’, ‘0B’, ‘0C’],
    [‘1A’, ‘1B’, ‘1C’],
    [‘2A’, ‘2B’, ‘2C’]
];</p>

<p>config = {
    columns: {
        0: {
            alignment: ‘left’,
            minWidth: 10
        },
        1: {
            alignment: ‘center’,
            minWidth: 10
        },
        2: {
            alignment: ‘right’,
            minWidth: 10
        }
    }
};</p>

<p>output = table(data, config);</p>

<p>console.log(output);
```</p>

<p><code>
╔════════════╤════════════╤════════════╗
║ 0A         │     0B     │         0C ║
╟────────────┼────────────┼────────────╢
║ 1A         │     1B     │         1C ║
╟────────────┼────────────┼────────────╢
║ 2A         │     2B     │         2C ║
╚════════════╧════════════╧════════════╝
</code></p>

<h3 id="table-usage-column-width">Column Width</h3>

<p><code>{number} config.columns[{number}].width</code> property restricts column width to a fixed width.</p>

<p>```js
let data,
    output,
    options;</p>

<p>data = [
    [‘0A’, ‘0B’, ‘0C’],
    [‘1A’, ‘1B’, ‘1C’],
    [‘2A’, ‘2B’, ‘2C’]
];</p>

<p>options = {
    columns: {
        1: {
            width: 10
        }
    }
};</p>

<p>output = table(data, options);</p>

<p>console.log(output);
```</p>

<p><code>
╔════╤════════════╤════╗
║ 0A │ 0B         │ 0C ║
╟────┼────────────┼────╢
║ 1A │ 1B         │ 1C ║
╟────┼────────────┼────╢
║ 2A │ 2B         │ 2C ║
╚════╧════════════╧════╝
</code></p>

<h3 id="table-usage-custom-border">Custom Border</h3>

<p><code>{object} config.border</code> property describes characters used to draw the table border.</p>

<p>```js
let config,
    data,
    output;</p>

<p>data = [
    [‘0A’, ‘0B’, ‘0C’],
    [‘1A’, ‘1B’, ‘1C’],
    [‘2A’, ‘2B’, ‘2C’]
];</p>

<p>config = {
    border: {
        topBody: <code>─</code>,
        topJoin: <code>┬</code>,
        topLeft: <code>┌</code>,
        topRight: <code>┐</code>,</p>

<pre><code>    bottomBody: `─`,
    bottomJoin: `┴`,
    bottomLeft: `└`,
    bottomRight: `┘`,

    bodyLeft: `│`,
    bodyRight: `│`,
    bodyJoin: `│`,

    joinBody: `─`,
    joinLeft: `├`,
    joinRight: `┤`,
    joinJoin: `┼`
} };
</code></pre>

<p>output = table(data, config);</p>

<p>console.log(output);
```</p>

<p><code>
┌────┬────┬────┐
│ 0A │ 0B │ 0C │
├────┼────┼────┤
│ 1A │ 1B │ 1C │
├────┼────┼────┤
│ 2A │ 2B │ 2C │
└────┴────┴────┘
</code></p>

<h3 id="table-usage-draw-horizontal-line">Draw Horizontal Line</h3>

<p><code>{function} config.drawHorizontalLine</code> property is a function that is called for every non-content row in the table. The result of the function <code>{boolean}</code> determines whether a row is drawn.</p>

<p>```js
let data,
    output,
    options;</p>

<p>data = [
    [‘0A’, ‘0B’, ‘0C’],
    [‘1A’, ‘1B’, ‘1C’],
    [‘2A’, ‘2B’, ‘2C’],
    [‘3A’, ‘3B’, ‘3C’],
    [‘4A’, ‘4B’, ‘4C’]
];</p>

<p>options = {
    /**
     * @typedef {function} drawJoin
     * @param {number} index
     * @param {number} size
     * @return {boolean}
     */
    drawHorizontalLine: (index, size) => {
        return index === 0 || index === 1 || index === size - 1 || index === size;
    }
};</p>

<p>output = table(data, options);</p>

<p>console.log(output);
```</p>

<p><code>
╔════╤════╤════╗
║ 0A │ 0B │ 0C ║
╟────┼────┼────╢
║ 1A │ 1B │ 1C ║
║ 2A │ 2B │ 2C ║
║ 3A │ 3B │ 3C ║
╟────┼────┼────╢
║ 4A │ 4B │ 4C ║
╚════╧════╧════╝
</code></p>

<h3 id="table-usage-padding-cell-content">Padding Cell Content</h3>

<p><code>{number} config.columns[{number}].paddingLeft</code> and <code>{number} config.columns[{number}].paddingRight</code> properties control content padding within a cell. Property value represents a number of whitespaces used to pad the content.</p>

<p>```js
let config,
    data,
    output;</p>

<p>data = [
    [‘0A’, ‘AABBCC’, ‘0C’],
    [‘1A’, ‘1B’, ‘1C’],
    [‘2A’, ‘2B’, ‘2C’]
];</p>

<p>config = {
    columns: {
        0: {
            paddingLeft: 3
        },
        1: {
            width: 2,
            paddingRight: 3
        }
    }
};</p>

<p>output = table(data, config);</p>

<p>console.log(output);
```</p>

<p><code>
╔══════╤══════╤════╗
║   0A │ AA   │ 0C ║
║      │ BB   │    ║
║      │ CC   │    ║
╟──────┼──────┼────╢
║   1A │ 1B   │ 1C ║
╟──────┼──────┼────╢
║   2A │ 2B   │ 2C ║
╚══════╧══════╧════╝
</code></p>

<h3 id="table-usage-predefined-border-templates">Predefined Border Templates</h3>

<p>You can load one of the predefined border templates using <code>getBorderCharacters</code> function.</p>

<p>```js
import table, {
    getBorderCharacters
} from ‘table’;</p>

<p>let config,
    data;</p>

<p>data = [
    [‘0A’, ‘0B’, ‘0C’],
    [‘1A’, ‘1B’, ‘1C’],
    [‘2A’, ‘2B’, ‘2C’]
];</p>

<p>config = {
    border: getBorderCharacters(<code>name of the template</code>)
};</p>

<p>table(data, config);
```</p>

<p>```
# honeywell</p>

<p>╔════╤════╤════╗
║ 0A │ 0B │ 0C ║
╟────┼────┼────╢
║ 1A │ 1B │ 1C ║
╟────┼────┼────╢
║ 2A │ 2B │ 2C ║
╚════╧════╧════╝</p>

<h1>norc</h1>

<p>┌────┬────┬────┐
│ 0A │ 0B │ 0C │
├────┼────┼────┤
│ 1A │ 1B │ 1C │
├────┼────┼────┤
│ 2A │ 2B │ 2C │
└────┴────┴────┘</p>

<h1>ramac (ASCII; for use in terminals that do not support Unicode characters)</h1>

<p>+—-+—-+—-+
| 0A | 0B | 0C |
|—-|—-|—-|
| 1A | 1B | 1C |
|—-|—-|—-|
| 2A | 2B | 2C |
+—-+—-+—-+</p>

<h1>void (no borders; see “bordless table” section of the documentation)</h1>

<p>0A  0B  0C</p>

<p>1A  1B  1C</p>

<p>2A  2B  2C</p>

<p>```</p>

<p>Raise <a href="https://github.com/gajus/table/issues">an issue</a> if you’d like to contribute a new border template.</p>

<h4 id="table-usage-predefined-border-templates-borderless-table">Borderless Table</h4>

<p>Simply using “void” border character template creates a table with a lot of unnecessary spacing.</p>

<p>To create a more plesant to the eye table, reset the padding and remove the joining rows, e.g.</p>

<p>```js
let output;</p>

<p>output = table(data, {
    border: getBorderCharacters(<code>void</code>),
    columnDefault: {
        paddingLeft: 0,
        paddingRight: 1
    },
    drawJoin: () => {
        return false
    }
});</p>

<p>console.log(output);
```</p>

<p><code>
0A 0B 0C
1A 1B 1C
2A 2B 2C
</code></p>

<h3 id="table-usage-streaming">Streaming</h3>

<p><code>table</code> package exports <code>createStream</code> function used to draw a table and append rows.</p>

<p><code>createStream</code> requires <code>{number} columnDefault.width</code> and <code>{number} columnCount</code> configuration properties.</p>

<p>```js
import {
    createStream
} from ‘table’;</p>

<p>let config,
    stream;</p>

<p>config = {
    columnDefault: {
        width: 50
    },
    columnCount: 1
};</p>

<p>stream = createStream(config);</p>

<p>setInterval(() => {
    stream.write([new Date()]);
}, 500);
```</p>

<p><img src="./.README/streaming.gif" alt="Streaming current date." /></p>

<p><code>table</code> package uses ANSI escape codes to overwrite the output of the last line when a new row is printed.</p>

<p>The underlying implementation is explained in this <a href="http://stackoverflow.com/a/32938658/368691">Stack Overflow answer</a>. </p>

<p>Streaming supports all of the configuration properties and functionality of a static table (such as auto text wrapping, alignment and padding), e.g.</p>

<p>```js
import {
    createStream
} from ‘table’;</p>

<p>import _ from ‘lodash’;</p>

<p>let config,
    stream,
    i;</p>

<p>config = {
    columnDefault: {
        width: 50
    },
    columnCount: 3,
    columns: {
        0: {
            width: 10,
            alignment: ‘right’
        },
        1: {
            alignment: ‘center’,
        },
        2: {
            width: 10
        }
    }
};</p>

<p>stream = createStream(config);</p>

<p>i = 0;</p>

<p>setInterval(() => {
    let random;</p>

<pre><code>random = _.sample('abcdefghijklmnopqrstuvwxyz', _.random(1, 30)).join('');

stream.write([i++, new Date(), random]); }, 500); ```
</code></pre>

<p><img src="./.README/streaming-random.gif" alt="Streaming random data." />
<h3 id="table-usage-text-truncation">Text Truncation</h3></p>

<p>To handle a content that overflows the container width, <code>table</code> package implements <a href="#table-usage-text-wrapping">text wrapping</a>. However, sometimes you may want to truncate content that is too long to be displayed in the table.</p>

<p><code>{number} config.columns[{number}].truncate</code> property (default: <code>Infinity</code>) truncates the text at the specified length.</p>

<p>```js
let config,
    data,
    output;</p>

<p>data = [
    [‘Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus pulvinar nibh sed mauris convallis dapibus. Nunc venenatis tempus nulla sit amet viverra.’]
];</p>

<p>config = {
    columns: {
        0: {
            width: 20,
            truncate: 100
        }
    }
};</p>

<p>output = table(data, config);</p>

<p>console.log(output);
```</p>

<p><code>
╔══════════════════════╗
║ Lorem ipsum dolor si ║
║ t amet, consectetur  ║
║ adipiscing elit. Pha ║
║ sellus pulvinar nibh ║
║ sed mauris conva...  ║
╚══════════════════════╝
</code></p>

<h3 id="table-usage-text-wrapping">Text Wrapping</h3>

<p><code>table</code> package implements auto text wrapping, i.e. text that has width greater than the container width will be separated into multiple lines, e.g.</p>

<p>```js
let config,
    data,
    output;</p>

<p>data = [
    [‘Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus pulvinar nibh sed mauris convallis dapibus. Nunc venenatis tempus nulla sit amet viverra.’]
];</p>

<p>config = {
    columns: {
        0: {
            width: 20
        }
    }
};</p>

<p>output = table(data, config);</p>

<p>console.log(output);
```</p>

<p><code>
╔══════════════════════╗
║ Lorem ipsum dolor si ║
║ t amet, consectetur  ║
║ adipiscing elit. Pha ║
║ sellus pulvinar nibh ║
║ sed mauris convallis ║
║ dapibus. Nunc venena ║
║ tis tempus nulla sit ║
║ amet viverra.        ║
╚══════════════════════╝
</code></p>

<p>When <code>wrapWord</code> is <code>true</code> the text is broken at the nearest space or one of the special characters (“-“, “_”, “", “/”, “.”, “,”, “;”), e.g.</p>

<p>```js
let config,
    data,
    output;</p>

<p>data = [
    [‘Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus pulvinar nibh sed mauris convallis dapibus. Nunc venenatis tempus nulla sit amet viverra.’]
];</p>

<p>config = {
    columns: {
        0: {
            width: 20,
            wrapWord: true
        }
    }
};</p>

<p>output = table(data, config);</p>

<p>console.log(output);
```</p>

<p><code>
╔══════════════════════╗
║ Lorem ipsum dolor    ║
║ sit amet,            ║
║ consectetur          ║
║ adipiscing elit.     ║
║ Phasellus pulvinar   ║
║ nibh sed mauris      ║
║ convallis dapibus.   ║
║ Nunc venenatis       ║
║ tempus nulla sit     ║
║ amet viverra.        ║
╚══════════════════════╝
</code></p>