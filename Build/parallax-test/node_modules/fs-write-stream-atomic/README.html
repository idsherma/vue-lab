<h1>fs-write-stream-atomic</h1>

<p>Like <code>fs.createWriteStream(...)</code>, but atomic.</p>

<p>Writes to a tmp file and does an atomic <code>fs.rename</code> to move it into
place when it’s done.</p>

<p>First rule of debugging: <strong>It’s always a race condition.</strong></p>

<h2>USAGE</h2>

<p>```javascript
var fsWriteStreamAtomic = require(‘fs-write-stream-atomic’)
// options are optional.
var write = fsWriteStreamAtomic(‘output.txt’, options)
var read = fs.createReadStream(‘input.txt’)
read.pipe(write)</p>

<p>// When the write stream emits a ‘finish’ or ‘close’ event,
// you can be sure that it is moved into place, and contains
// all the bytes that were written to it, even if something else
// was writing to <code>output.txt</code> at the same time.
```</p>

<h3><code>fsWriteStreamAtomic(filename, [options])</code></h3>

<ul>
  <li><code>filename</code> {String} The file we want to write to</li>
  <li><code>options</code> {Object}
    <ul>
      <li><code>chown</code> {Object} User and group to set ownership after write
        <ul>
          <li><code>uid</code> {Number}</li>
          <li><code>gid</code> {Number}</li>
        </ul>
      </li>
      <li><code>encoding</code> {String} default = ‘utf8’</li>
      <li><code>mode</code> {Number} default = <code>0666</code></li>
      <li><code>flags</code> {String} default = <code>'w'</code></li>
    </ul>
  </li>
</ul>