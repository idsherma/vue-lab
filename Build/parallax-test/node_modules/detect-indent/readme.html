<h1>detect-indent <a href="https://travis-ci.org/sindresorhus/detect-indent"><img src="https://travis-ci.org/sindresorhus/detect-indent.svg?branch=master" alt="Build Status" /></a></h1>

<blockquote>
  <p>Detect the indentation of code</p>
</blockquote>

<p>Pass in a string of any kind of text and get the indentation.</p>

<h2>Use cases</h2>

<ul>
  <li>Persisting the indentation when modifying a file.</li>
  <li>Have new content match the existing indentation.</li>
  <li>Setting the right indentation in your editor.</li>
</ul>

<h2>Install</h2>

<p><code>
$ npm install --save detect-indent
</code></p>

<h2>Usage</h2>

<p>Here we modify a JSON file while persisting the indentation:</p>

<p>```js
var fs = require(‘fs’);
var detectIndent = require(‘detect-indent’);</p>

<p>/*
{
    “ilove”: “pizza”
}
*/
var file = fs.readFileSync(‘foo.json’, ‘utf8’);</p>

<p>// tries to detect the indentation and falls back to a default if it can’t
var indent = detectIndent(file).indent || ‘    ‘;</p>

<p>var json = JSON.parse(file);</p>

<p>json.ilove = ‘unicorns’;</p>

<p>fs.writeFileSync(‘foo.json’, JSON.stringify(json, null, indent));
/*
{
    “ilove”: “unicorns”
}
*/
```</p>

<h2>API</h2>

<p>Accepts a string and returns an object with stats about the indentation:  </p>

<ul>
  <li><code>amount</code> {number} - Amount of indentation, e.g. <code>2</code>  </li>
  <li>
    <table>
      <tbody>
        <tr>
          <td><code>type</code> {string</td>
          <td>null} - Type of indentation. Possible values are <code>tab</code>, <code>space</code> or <code>null</code> if no indentation is detected</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><code>indent</code>   {string} - Actual indentation</li>
</ul>

<h2>Algorithm</h2>

<p>The current algorithm looks for the most common difference between two consecutive non-empty lines.</p>

<p>In the following example, even if the 4-space indentation is used 3 times whereas the 2-space one is used 2 times, it is detected as less used because there were only 2 differences with this value instead of 4 for the 2-space indentation:</p>

<p>```css
html {
  box-sizing: border-box;
}</p>

<p>body {
  background: gray;
}</p>

<p>p {
    line-height: 1.3em;
    margin-top: 1em;
    text-indent: 2em;
}
```</p>

<p><a href="https://medium.com/@heatherarthur/detecting-code-indentation-eff3ed0fb56b#3918">Source.</a></p>

<p>Furthermore, if there are more than one most used difference, the indentation with the most lines is selected.</p>

<p>In the following example, the indentation is detected as 4-spaces:</p>

<p>```css
body {
  background: gray;
}</p>

<p>p {
    line-height: 1.3em;
    margin-top: 1em;
    text-indent: 2em;
}
```</p>

<h2>Related</h2>

<ul>
  <li><a href="https://github.com/sindresorhus/detect-indent-cli">detect-indent-cli</a> - CLI for this module</li>
</ul>

<h2>License</h2>

<p>MIT © <a href="http://sindresorhus.com">Sindre Sorhus</a></p>