<h1>eslint-plugin-html</h1>

<p><a href="https://travis-ci.org/BenoitZugmeyer/eslint-plugin-html"><img src="https://travis-ci.org/BenoitZugmeyer/eslint-plugin-html.svg?branch=master" alt="Build Status" /></a></p>

<p>This <a href="http://eslint.org"><code>ESLint</code></a> plugin allows linting and fixing inline scripts contained in HTML
files.</p>

<h2>Migration to v3</h2>

<p>If you are considering upgrading to v3, please read <a href="MIGRATION_TO_V3.md">this guide</a>.</p>

<h2>Usage</h2>

<p>Simply install via <code>npm install --save-dev eslint-plugin-html</code> and add the plugin to your ESLint
configuration. See
<a href="http://eslint.org/docs/user-guide/configuring#configuring-plugins">ESLint documentation</a>.</p>

<p>Example:</p>

<p><code>javascript
{
    "plugins": [
        "html"
    ]
}
</code></p>

<p>Note: by default, when executing the <code>eslint</code> command on a directory, only <code>.js</code> files will be
linted. You will have to specify extra extensions with the <code>--ext</code> option. Example: <code>eslint --ext
.html,.js src</code> will lint both <code>.html</code> and <code>.js</code> files in the <code>src</code> directory. See <a href="http://eslint.org/docs/user-guide/command-line-interface#ext">ESLint
documentation</a>.</p>

<h2>XML support</h2>

<p>This plugin parses HTML and XML markup slightly differently, mainly when considering <code>CDATA</code>
sections:
* in XML, any data inside a <code>CDATA</code> section will be considered as raw text (not XML) and the <code>CDATA</code>
  delimiter will be droped ;
* in HTML, there is no such thing for <code><script></code> tags: the <code>CDATA</code> delimiter is considered as normal
  text and thus, part of the script.</p>

<h2>Settings</h2>

<blockquote>
  <p>Note: all settings can be written either as <code>"html/key": value</code> or in a nested object <code>"html": {
"key": value }</code></p>
</blockquote>

<h3><code>html/html-extensions</code></h3>

<p>By default, this plugin will only consider files ending with those extensions as HTML: <code>.erb</code>,
<code>.handlebars</code>, <code>.hbs</code>, <code>.htm</code>, <code>.html</code>, <code>.mustache</code>, <code>.nunjucks</code>, <code>.php</code>, <code>.tag</code>, <code>.twig</code>, <code>.vue</code>,
<code>.we</code>. You can set your own list of HTML extensions by using this setting. Example:</p>

<p><code>javascript
{
    "plugins": [ "html" ],
    "settings": {
        "html/html-extensions": [".html", ".we"],  // consider .html and .we files as HTML
    }
}
</code></p>

<h3><code>html/xml-extensions</code></h3>

<p>By default, this plugin will only consider files ending with those extensions as XML: <code>.xhtml</code>,
<code>.xml</code>. You can set your own list of XML extensions by using this setting. Example:</p>

<p><code>javascript
{
    "plugins": [ "html" ],
    "settings": {
        "html/xml-extensions": [".html"],  // consider .html files as XML
    }
}
</code></p>

<h3><code>html/indent</code></h3>

<p>By default, the code between <code><script></code> tags is dedented according to the first non-empty line. The
setting <code>html/indent</code> allows to ensure that every script tags follow an uniform indentation. Like
the <code>indent</code> rule, you can pass a number of spaces, or <code>"tab"</code> to indent with one tab. Prefix this
value with a <code>+</code> to be relative to the <code><script></code> tag indentation. Example:</p>

<p><code>javascript
{
    "plugins": [ "html" ],
    "settings": {
        "html/indent": "0",   // code should start at the beginning of the line (no initial indentation).
        "html/indent": "+2",  // indentation is the <script> indentation plus two spaces.
        "html/indent": "tab", // indentation is one tab at the beginning of the line.
    }
}
</code></p>

<h3><code>html/report-bad-indent</code></h3>

<p>By default, this plugin won’t warn if it encounters a problematic indentation (ex: a line is under
indented). If you want to make sure the indentation is correct, use the <code>html/report-bad-indent</code> in
conjunction with the <code>indent</code> rule. Pass <code>"warn"</code> or <code>1</code> to display warnings, <code>"error"</code> or <code>2</code> to
display errors. Example:</p>

<p><code>javascript
{
    "plugins": [ "html" ],
    "settings": {
        "html/report-bad-indent": "error",
    }
}
</code></p>

<h3><code>html/javascript-mime-types</code></h3>

<p>By default, the code between <code><script></code> tags is considered as JavaScript code only if there is no
<code>type</code> attribute or if its value matches the pattern
<code>/^(application|text)\/(x-)?(javascript|babel|ecmascript-6)$/i</code>. You can customize the types that
should be considered as JavaScript by providing one or multiple MIME types. If a MIME type starts
with a <code>/</code>, it will be considered as a regular expression. Example:</p>

<p><code>javascript
{
    "plugins": [ "html" ],
    "settings": {
        "html/javascript-mime-types": ["text/javascript", "text/jsx"],  // also use script tags with a "text/jsx" type attribute
        "html/javascript-mime-types": "/^text\\/(javascript|jsx)$/",    // same thing
    }
}
</code></p>

<h2>Troubleshooting</h2>

<h3>Linting templates (or PHP)</h3>

<p><code>eslint-plugin-html</code> won’t evaluate or remove your template markup.  If you have template markup in
your script tags, the resulting script may not be valid JavaScript, so <code>ESLint</code> will fail to parse
it.</p>

<p>One possible hacky workaround to make sure the code is valid JavaScript is to put your template
markup inside a comment.  When the template is rendered, the generated JS code must start with a new
line, so it will be written below the comment.  PHP example:</p>

<p><code>html
<script>
var mydata;
// <?= "\n mydata = " . json_encode($var) . ";" ?>
console.log(mydata);
</script>
</code></p>

<h3>Linting VUE files</h3>

<p>Initially, <a href="https://github.com/vuejs/eslint-plugin-vue"><code>eslint-plugin-vue</code></a> was using
<code>eslint-plugin-html</code> to lint code inside script tags.  Since v3, <code>eslint-plugin-vue</code> is using its
own parser, so it is <em>incompatible</em> with <code>eslint-plugin-html</code>.  You should remove
<code>eslint-plugin-html</code> from your dependencies if you still have this.</p>